---
/**
 * BlogAuthor component - Display author information with avatar
 */
import type { Author } from "@/types/blog";

interface Props {
  author: Author | string;
  size?: "sm" | "md" | "lg";
  showBio?: boolean;
  showSocial?: boolean;
}

const { author, size = "md", showBio = false, showSocial = false } = Astro.props;

// Convert string author to basic Author object
const authorData: Author =
  typeof author === "string" ? { name: author } : author;

const sizeClasses = {
  sm: "size-8",
  md: "size-12",
  lg: "size-16",
};

const textSizeClasses = {
  sm: "text-sm",
  md: "text-base",
  lg: "text-lg",
};
---

<div class="flex items-start gap-3">
  <div class={`flex-shrink-0 ${sizeClasses[size]}`}>
    {
      authorData.avatar ? (
        <img
          src={authorData.avatar}
          alt={authorData.name}
          class="size-full rounded-full object-cover"
        />
      ) : (
        <div class="flex size-full items-center justify-center rounded-full bg-accent/20 font-semibold text-accent">
          {authorData.name.charAt(0).toUpperCase()}
        </div>
      )
    }
  </div>
  <div class="flex-1">
    <div class={`font-medium ${textSizeClasses[size]}`}>
      {authorData.name}
    </div>
    {
      showBio && authorData.bio && (
        <p class="mt-1 text-sm text-foreground/70">{authorData.bio}</p>
      )
    }
    {
      showSocial && authorData.social && (
        <div class="mt-2 flex gap-2">
          {authorData.social.twitter && (
            <a
              href={`https://twitter.com/${authorData.social.twitter}`}
              class="text-sm text-accent hover:underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              Twitter
            </a>
          )}
          {authorData.social.github && (
            <a
              href={`https://github.com/${authorData.social.github}`}
              class="text-sm text-accent hover:underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              GitHub
            </a>
          )}
          {authorData.social.linkedin && (
            <a
              href={`https://linkedin.com/in/${authorData.social.linkedin}`}
              class="text-sm text-accent hover:underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              LinkedIn
            </a>
          )}
          {authorData.social.website && (
            <a
              href={authorData.social.website}
              class="text-sm text-accent hover:underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              Website
            </a>
          )}
        </div>
      )
    }
  </div>
</div>
